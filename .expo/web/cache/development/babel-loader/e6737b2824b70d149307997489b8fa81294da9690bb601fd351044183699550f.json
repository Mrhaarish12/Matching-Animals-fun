{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\nvar _react = _interopRequireDefault(require(\"react\"));\nvar _reactNative = require(\"react-native\");\nvar _asyncStorage = require(\"@react-native-async-storage/async-storage\");\nvar _reactNativeInAppReview = _interopRequireDefault(require(\"react-native-in-app-review\"));\nvar _players = require(\"../hooks/players\");\nvar _colors = require(\"../constants/colors\");\nvar _Animals = _interopRequireDefault(require(\"../Animals\"));\nvar _Button = _interopRequireDefault(require(\"../Button\"));\nvar _Confetti = _interopRequireDefault(require(\"../Confetti\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _excluded = [\"backToMainMenu\", \"player\", \"players\", \"style\"];\nvar _this = this,\n  _jsxFileName = \"C:\\\\Users\\\\Estem\\\\Desktop\\\\matchimals.fun-main\\\\src\\\\Victory\\\\index.js\";\nvar Victory = function Victory(_ref) {\n  var _players$player, _playerConfig$player, _playerConfig$player2, _playerConfig$player3;\n  var backToMainMenu = _ref.backToMainMenu,\n    player = _ref.player,\n    players = _ref.players,\n    style = _ref.style,\n    rest = (0, _objectWithoutProperties2.default)(_ref, _excluded);\n  var _useAsyncStorage = (0, _asyncStorage.useAsyncStorage)(\"lastReviewPrompt\"),\n    getAsyncLastReviewPrompt = _useAsyncStorage.getItem,\n    setAsyncLastReviewPrompt = _useAsyncStorage.setItem;\n  var _usePlayerConfig = (0, _players.usePlayerConfig)(),\n    playerConfig = _usePlayerConfig.playerConfig;\n  var score = (_players$player = players[player]) == null ? void 0 : _players$player.score;\n  var name = (_playerConfig$player = playerConfig[player]) == null ? void 0 : _playerConfig$player.name;\n  var backgroundColor = (_playerConfig$player2 = playerConfig[player]) == null ? void 0 : _playerConfig$player2.color;\n  var Icon = _Animals.default[(_playerConfig$player3 = playerConfig[player]) == null ? void 0 : _playerConfig$player3.animal];\n  var handleEndGame = function () {\n    var _ref2 = (0, _asyncToGenerator2.default)(function* () {\n      var asyncLastReviewPrompt = yield getAsyncLastReviewPrompt();\n      var lastPrompt = asyncLastReviewPrompt && new Date(asyncLastReviewPrompt);\n      var thirtyDaysAgo = new Date(new Date().setDate(new Date().getDate() - 30));\n      if (_reactNativeInAppReview.default.isAvailable() && lastPrompt < thirtyDaysAgo) {\n        _reactNativeInAppReview.default.RequestInAppReview().then(function (hasFlowFinishedSuccessfully) {\n          if (hasFlowFinishedSuccessfully) {\n            setAsyncLastReviewPrompt(new Date().toISOString());\n          }\n        }).catch(function (error) {\n          console.log(error);\n        });\n      }\n      backToMainMenu();\n    });\n    return function handleEndGame() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  return (0, _jsxRuntime.jsxs)(_reactNative.View, Object.assign({\n    style: [styles.root, style]\n  }, rest, {\n    children: [(0, _jsxRuntime.jsx)(_Confetti.default, {}), (0, _jsxRuntime.jsxs)(_reactNative.View, {\n      style: styles.modal,\n      children: [(0, _jsxRuntime.jsx)(_reactNative.View, {\n        style: [styles.animal, {\n          backgroundColor: backgroundColor || \"#9F9FB7\"\n        }],\n        children: (0, _jsxRuntime.jsx)(Icon, {\n          width: 80,\n          height: 80\n        })\n      }), (0, _jsxRuntime.jsxs)(_reactNative.View, {\n        style: styles.details,\n        children: [(0, _jsxRuntime.jsxs)(_reactNative.Text, {\n          style: styles.name,\n          children: [name, \" Wins!\"]\n        }), (0, _jsxRuntime.jsx)(_reactNative.Text, {\n          style: styles.score,\n          children: score\n        }), (0, _jsxRuntime.jsx)(_Button.default, {\n          color: _colors.colors.redLight,\n          onPress: handleEndGame,\n          style: {\n            marginBottom: 16\n          },\n          children: \"EXIT TO MAIN MENU\"\n        })]\n      })]\n    })]\n  }));\n};\nvar styles = _reactNative.StyleSheet.create({\n  root: Object.assign({}, _reactNative.StyleSheet.absoluteFillObject, {\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    backgroundColor: \"rgba(0,0,0,0.5)\"\n  }),\n  modal: {\n    width: 316,\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    backgroundColor: \"#fff\",\n    borderRadius: 36,\n    borderColor: \"#fff\",\n    borderWidth: 4,\n    marginBottom: 4\n  },\n  animal: {\n    position: \"absolute\",\n    top: -60,\n    left: \"50%\",\n    marginLeft: -60,\n    flexShrink: 0,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    width: 120,\n    height: 120,\n    borderRadius: 60,\n    borderWidth: 8,\n    borderColor: \"#fff\"\n  },\n  details: {\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  name: {\n    textAlign: \"center\",\n    color: \"#17171b\",\n    fontFamily: \"Dimbo\",\n    fontSize: 48,\n    lineHeight: 60,\n    marginTop: 72\n  },\n  score: {\n    textAlign: \"center\",\n    color: \"#17171b\",\n    fontFamily: \"Dimbo\",\n    fontSize: 96,\n    lineHeight: 128,\n    marginTop: -12\n  }\n});\nvar _default = Victory;\nexports.default = _default;","map":{"version":3,"names":["_react","_interopRequireDefault","require","_reactNative","_asyncStorage","_reactNativeInAppReview","_players","_colors","_Animals","_Button","_Confetti","_jsxRuntime","_excluded","_this","_jsxFileName","Victory","_ref","_players$player","_playerConfig$player","_playerConfig$player2","_playerConfig$player3","backToMainMenu","player","players","style","rest","_objectWithoutProperties2","default","_useAsyncStorage","useAsyncStorage","getAsyncLastReviewPrompt","getItem","setAsyncLastReviewPrompt","setItem","_usePlayerConfig","usePlayerConfig","playerConfig","score","name","backgroundColor","color","Icon","Animals","animal","handleEndGame","_ref2","_asyncToGenerator2","asyncLastReviewPrompt","lastPrompt","Date","thirtyDaysAgo","setDate","getDate","InAppReview","isAvailable","RequestInAppReview","then","hasFlowFinishedSuccessfully","toISOString","catch","error","console","log","apply","arguments","jsxs","View","Object","assign","styles","root","children","jsx","modal","width","height","details","Text","colors","redLight","onPress","marginBottom","StyleSheet","create","absoluteFillObject","flex","alignItems","justifyContent","flexDirection","borderRadius","borderColor","borderWidth","position","top","left","marginLeft","flexShrink","textAlign","fontFamily","fontSize","lineHeight","marginTop","_default","exports"],"sources":["C:/Users/Estem/Desktop/matchimals.fun-main/src/Victory/index.js"],"sourcesContent":["import React from \"react\";\nimport { StyleSheet, Text, View } from \"react-native\";\nimport { useAsyncStorage } from \"@react-native-async-storage/async-storage\";\nimport InAppReview from \"react-native-in-app-review\";\n\nimport { usePlayerConfig } from \"../hooks/players\";\nimport { colors } from \"../constants/colors\";\n\nimport Animals from \"../Animals\";\nimport Button from \"../Button\";\nimport Confetti from \"../Confetti\";\n\nconst Victory = ({ backToMainMenu, player, players, style, ...rest }) => {\n  const {\n    getItem: getAsyncLastReviewPrompt,\n    setItem: setAsyncLastReviewPrompt,\n  } = useAsyncStorage(\"lastReviewPrompt\");\n  const { playerConfig } = usePlayerConfig();\n  const score = players[player]?.score;\n  const name = playerConfig[player]?.name;\n  const backgroundColor = playerConfig[player]?.color;\n  const Icon = Animals[playerConfig[player]?.animal];\n\n  const handleEndGame = async () => {\n    const asyncLastReviewPrompt = await getAsyncLastReviewPrompt();\n    const lastPrompt = asyncLastReviewPrompt && new Date(asyncLastReviewPrompt);\n    const thirtyDaysAgo = new Date(\n      new Date().setDate(new Date().getDate() - 30)\n    );\n\n    if (InAppReview.isAvailable() && lastPrompt < thirtyDaysAgo) {\n      InAppReview.RequestInAppReview()\n        .then((hasFlowFinishedSuccessfully) => {\n          if (hasFlowFinishedSuccessfully) {\n            setAsyncLastReviewPrompt(new Date().toISOString());\n          }\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    }\n\n    backToMainMenu();\n  };\n\n  return (\n    <View style={[styles.root, style]} {...rest}>\n      <Confetti />\n      <View style={styles.modal}>\n        <View\n          style={[\n            styles.animal,\n            {\n              backgroundColor: backgroundColor || \"#9F9FB7\",\n            },\n          ]}\n        >\n          <Icon width={80} height={80} />\n        </View>\n        <View style={styles.details}>\n          <Text style={styles.name}>{name} Wins!</Text>\n          <Text style={styles.score}>{score}</Text>\n          <Button\n            color={colors.redLight}\n            onPress={handleEndGame}\n            style={{ marginBottom: 16 }}\n          >\n            EXIT TO MAIN MENU\n          </Button>\n        </View>\n      </View>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  root: {\n    ...StyleSheet.absoluteFillObject,\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    backgroundColor: \"rgba(0,0,0,0.5)\",\n  },\n  modal: {\n    width: 316,\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    backgroundColor: \"#fff\",\n    borderRadius: 36,\n    borderColor: \"#fff\",\n    borderWidth: 4,\n    marginBottom: 4,\n  },\n  animal: {\n    position: \"absolute\",\n    top: -60,\n    left: \"50%\",\n    marginLeft: -60,\n    flexShrink: 0,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    width: 120,\n    height: 120,\n    borderRadius: 60,\n    borderWidth: 8,\n    borderColor: \"#fff\",\n  },\n  details: {\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  name: {\n    textAlign: \"center\",\n    color: \"#17171b\",\n    fontFamily: \"Dimbo\",\n    fontSize: 48,\n    lineHeight: 60,\n    marginTop: 72,\n  },\n  score: {\n    textAlign: \"center\",\n    color: \"#17171b\",\n    fontFamily: \"Dimbo\",\n    fontSize: 96,\n    lineHeight: 128,\n    marginTop: -12,\n  },\n});\n\nexport default Victory;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}